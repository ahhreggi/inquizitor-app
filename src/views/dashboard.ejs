<!DOCTYPE html>
<html lang="en">

<head>
  <title>Dashboard - InquizitorApp</title>
  <%- include("partials/_imports.ejs") %>
</head>

<body>

  <%- include("partials/_header.ejs", {alerts, userData, currentPage}) %>

  <main class="container d-flex flex-column flex-lg-row mt-lg-4">

    <!-- MAIN WINDOW (SPLIT) -->
    <div class="col-12 col-lg-8 m-auto">
      <section id="main-split" class="overflow-auto border-purple">
        <!-- MAIN TITLE -->
        <div id="main-title" class="mb-5">
          Dashboard
        </div>
        <!-- MAIN CONTENT -->
        <div id="main-split-content">

          <!-- TEMPORARY -->
          <% const userQuizzes = [1]; %>
          <% const userHistory = []; %>
          <!--------------->

          <!-- MY QUIZZES -->
          <div id="user-quizzes">
            <p class="h4 mt-0 mb-4">My Quizzes</p>
            <% for (const quiz of userQuizzes) { %>
              <a href="/quizzes/<%= //quiz.id %> ">
                <div class="d-flex flex-row justify-content-between align-items-center list-quiz">
                  <div class="col-8">
                    <p class="quiz-title mb-0 mt-0">My Quiz Title<%= //quiz.title %></p>
                    <p class="quiz-date d-none d-xl-inline">My Quiz Desc<%= //quiz.description %></p>
                    <p class="quiz-author d-none d-md-block my-1 text-muted">Jan 1, 2021<%= //quiz.creation_date %></p>
                  </div>
                  <div id="user-quizzes-control" class="d-flex flex-column">
                    <button type="button" class="btn-custom btn-custom-green mb-3 mr-2">
                      View
                    </button>
                    <button type="button" class="btn-custom btn-custom-red mr-2">
                      Delete
                    </button>
                  </div>
                </div>
              </a>
            <% } %>
          </div>

          <!-- QUIZ HISTORY -->
          <div id="user-history">
            <p class="h4 mt-4 mb-4">Quiz History</p>
            <% for (const session of userHistory) { %>
            <a href="/results/<%= session.result_id %> ">
              <div class="past-quiz d-flex flex-row justify-content-between align-items-center list-quiz">
                <div class="col-8">
                  <p class="quiz-title mb-0 mt-0">Quiz Title<%= session.quiz_title %></p>
                  <p class="quiz-author d-none d-md-block my-1 text-muted"><%= session.end_time ? `Completed on: ${session.end_time}` : "Abandoned" %></p>
                </div>
                <!-- BUTTON LINK TO RESULTS (if it exists) -->
                <% if (session.result_id) { %>
                  <a href="/results/<%= session.result_id %> ">
                    <button type="button" class="btn-custom mr-2">
                      Results
                    </button>
                  </a>
                <% } %>
              </div>
            </a>
            <% } %>
          </div>

        </div>
      </section>
    </div>

    <!-- SIDE PANELS (SPLIT) -->
    <div id="side-section" class="col-12 col-lg-4">
      <!-- USER PANEL -->
      <%- include("partials/_side_top.ejs", userData) %>
      <!-- LEADERBOARDS -->
      <%- include("partials/_side_bottom.ejs", rankData) %>
    </div>

  </main>

  <%- include("partials/_footer.ejs") %>

</body>

</html>