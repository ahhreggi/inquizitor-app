<!DOCTYPE html>
<html lang="en">

<head>
  <title>All Quizzes - InquizitorApp</title>
  <%- include("partials/_imports.ejs") %>
  <script type="text/javascript" src="/scripts/quiz_index.js"></script>
</head>

<body>

  <%- include("partials/_header.ejs", {alerts, userData, currentPage}) %>

  <main class="container d-flex flex-column flex-lg-row mt-lg-4">

    <!-- MAIN WINDOW (SPLIT) -->
    <div class="col-12 col-lg-8 m-auto">
      <section id="main-split" class="overflow-auto border-yellow">
        <!-- MAIN TITLE -->
        <div id="main-title" class="mb-5">
          All Quizzes
        </div>
        <!-- MAIN CONTENT -->
        <div id="main-split-content">

          <!-- ALL QUIZZES TABS -->

          <% const sortTech = quizData.filter(quiz => quiz.category_title === "Technology") %>
          <% const sortGaming = quizData.filter(quiz => quiz.category_title === "Gaming") %>
          <% const sortEdu = quizData.filter(quiz => quiz.category_title === "Education") %>

          <button id="tab-all" type="button" class="active-tab tab-btn mr-2">
            All <%= quizData.length ? `(${quizData.length})` : "" %>
          </button>
          <button id="tab-tech" type="button" class="tab-btn mr-2">
            Technology <%= sortTech.length ? `(${sortTech.length})` : "" %>
          </button>

          <% for (const quiz of quizData) { %>
          <a href="/quizzes/<%= quiz.id %> ">
            <div class="d-flex flex-row justify-content-between align-items-center list-quiz">
              <div class="col-8">
                <p class="quiz-title mb-0 mt-0"><%= quiz.title %></p>
                <p class="quiz-desc d-none d-xl-inline"><%= quiz.description %></p>
                <p class="quiz-author d-none d-md-block my-1 text-muted">Submitted by <%= quiz.author %></p>
              </div>
              <img class="quiz-go pr-3" src="/images/arrow-green.png" alt="arrow" />
            </div>
          </a>
          <% } %>
        </div>
      </section>
    </div>

    <!-- SIDE PANELS (SPLIT) -->
    <div id="side-section" class="col-12 col-lg-4">
      <!-- USER PANEL -->
      <%- include("partials/_side_top.ejs", userData) %>
      <!-- LEADERBOARDS -->
      <%- include("partials/_side_bottom.ejs", rankData) %>
    </div>

  </main>

  <%- include("partials/_footer.ejs") %>

</body>

</html>